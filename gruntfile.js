'use strict';

module.exports = function(grunt) {
	// =========================================================================
	// Config
	// =========================================================================
	grunt.config.init({
		env: {
			dev: {
				
			}
		},
		eslint: {
			all: ['src/**/*.js'],
			options: {
				config: 'eslint.json'
			}
		},
		express: {
			dev: {
				options: {
					background: true,
					debug: true,
					port: 8888,
					script: 'src/index.js'
				}
			}
		},
		pkg: grunt.file.readJSON('package.json'),
		watch: {
			express: {
				files: ['src/**/*.js'],
				tasks: ['express:dev'],
				options: {
					spawn: false
				}
			}
		}
	});

	// =========================================================================
	// Plugins
	// =========================================================================
	grunt.loadNpmTasks('grunt-contrib-watch');
	grunt.loadNpmTasks('grunt-eslint');
	grunt.loadNpmTasks('grunt-express-server');

	// =========================================================================
	// Tasks
	// =========================================================================
	
	// -------------------------------------------------------------------------
	// Default
	// -------------------------------------------------------------------------
	grunt.registerTask('default', ['lint']);

	// -------------------------------------------------------------------------
	// Lint
	// -------------------------------------------------------------------------
	grunt.registerTask('lint', [
		'eslint:all'
	]);

	// -------------------------------------------------------------------------
	// Start
	// -------------------------------------------------------------------------
	grunt.registerTask('start', ['express:dev', 'watch']);
};